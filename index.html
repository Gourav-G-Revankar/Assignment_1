<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>Recreate in HTML & CSS</title>
</head>

<body>
    <div class="hero-container">
        <div class="hero-callout-box">
            <span id="callout">$167 still needed for this project</span>
        </div>
        <div id="hero-bar">
            <div id="hero-progress-bar"></div>
        </div>
        <div class="hero-box">
            <p>
                <span class="text-bold-color">Only 3 days left</span> to fund this project.
            </p>
            <p>
                Join the 42 other donors who have already supported this project. Every dollar helps.
            </p>
            <div class="hero-donor">
                <input type="text" id="d_money" class="text-field" placeholder="$" />
                <button type="button" id="btn-field">Give Now</button>
            </div>
            <!-- Trigger/Open The Modal -->
            <a href="#" id="myBtn" class="text-color">Why give $50?</a>

            <!-- The Modal -->
            <div id="myModal" class="modal">

                <!-- Modal content -->
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <p>One of the major positive effects of donating money to project is simply feeling good about
                        giving. Being able to give back to those in need helps you achieve a greater sense of personal
                        satisfaction and growth, it feels good to help others. </p>
                </div>

            </div>
        </div>
        <div class="hero-btn-box">
            <button type="button" class="btn-row">Save for later</button>
            <button type="button" class="btn-row">Tell your friends</button>
        </div>
    </div>

    <!-----------------------Javascript----------------------->

    <script>
        // Progress bar movement
        var progress_bar = parseInt(133/300*100);
        document.getElementById("hero-progress-bar").style.width = progress_bar + '%';
        document.getElementById("btn-field").addEventListener("click", move);
        function move() {
            var d_money=document.getElementById("d_money").value;
            console.log("d_money-"+ d_money);
            var rem = 167;
            var callout = rem-d_money;
            var max = 300;
            var total = parseInt(d_money/max*100);
            console.log("total-"+ total);
            var width = progress_bar + total;
            console.log("progress_bar-"+ progress_bar);
            console.log("width-"+ width);
            var id = setInterval(frame, 10);
            function frame() {
                if (width >= 100 || d_money>= 167 ) {
                    document.getElementById("callout").innerHTML = "Thank You";
                    document.getElementById("hero-progress-bar").style.width ='100%';
                    clearInterval(id);
                } else {
                    document.getElementById("callout").innerHTML ='$'+callout+' still needed for this project';
                    document.getElementById("hero-progress-bar").style.width = width + '%';
                }
            }
        }

        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks the button, open the modal 
        btn.onclick = function () {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>

</html>